---
title: 【斯普莱格-格隆第定理】蓝桥杯　高僧斗法
copyright: true
date: 2019-02-25 21:46:37
tags:
 - Nim博弈
categories:
 - 蓝桥杯
keywords:
description:
---

## 问题描述
　　古时丧葬活动中经常请高僧做法事。仪式结束后，有时会有“高僧斗法”的趣味节目，以舒缓压抑的气氛。
　　节目大略步骤为：先用粮食（一般是稻米）在地上“画”出若干级台阶（表示N级浮屠）。又有若干小和尚随机地“站”在某个台阶上。最高一级台阶必须站人，其它任意。(如图1所示)
　　两位参加游戏的法师分别指挥某个小和尚向上走任意多级的台阶，但会被站在高级台阶上的小和尚阻挡，不能越过。两个小和尚也不能站在同一台阶，也不能向低级台阶移动。
　　两法师轮流发出指令，最后所有小和尚必然会都挤在高段台阶，再也不能向上移动。轮到哪个法师指挥时无法继续移动，则游戏结束，该法师认输。
　　对于已知的台阶数和小和尚的分布位置，请你计算先发指令的法师该如何决策才能保证胜出。
<!-- more -->

## 输入格式
　　输入数据为一行用空格分开的N个整数，表示小和尚的位置。台阶序号从1算起，所以最后一个小和尚的位置即是台阶的总数。（N<100, 台阶总数<1000）

## 输出格式
　　输出为一行用空格分开的两个整数: A B, 表示把A位置的小和尚移动到B位置。若有多个解，输出A值较小的解，若无解则输出-1。

## 样例输入
	1 5 9
## 样例输出
	1 4
## 样例输入
	1 5 8 10
## 样例输出
	1 3

## 题意
给你Ｎ个和尚，每个和尚可以网上移动任意距离，但是不能超过他前面的第一个和尚。依次轮流移动和尚，直至轮到移动的一方无法移动为输。问先手是否有一种移动方式必胜，有则输出移动方式。

## 思路
斯普莱格–格隆第定理：在组合博弈论中，斯普莱格–格隆第定理证明， 所有的一般胜利条件下的无偏博弈都能转换成尼姆数表达的尼姆堆博弈。 一个无偏博弈的尼姆值定义为这个博弈的等价尼姆数。
两两和尚之间的距离看成一个堆，如1,3,5,7，则看成(1,3),(5,7)，若为基数个，舍去最后一个和尚。
再用暴力枚举出第一种可能的移动情况。
为何两两？非两两的成堆会导致一个堆移动的时候对其余的堆发生影响，破坏了Nim博弈的性质。

## AC代码
```c++
评测结果	正确
得分	100
CPU使用	0ms
内存使用	1.304MB

#include <bits/stdc++.h>
using namespace std;
const int maxn = 1e5 + 7;
int a[maxn], num;
int judge(void)
{
    int ans = 0;
    for (int i = 1; i + 1 <= num; i += 2)
    {
        ans ^= (a[i + 1] - a[i] - 1);
    }
    if (ans) //若移动之后为Ｎ状态，此方案不可行
        return false;
    return true; //为０即为Ｐ状态，可行。
}
int main(void)
{
    while (1)
    {
        char p;
        scanf("%d%c", &a[++num], &p);
        if (p == '\n')
            break;
    }
    for (int i = 1; i < num; i++)
    {
        for (int j = a[i] + 1; j < a[i + 1]; j++)
        {
            int back = a[i];
            a[i] = j;
            if (judge())
            {
                printf("%d %d\n", back, j);
                return 0;
            }
            a[i] = back;
        }
    }
    printf("-1");
    return 0;
}
```